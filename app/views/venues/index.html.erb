<% content_for :meta_title, "MapAbl | Venues" %>
<div class="row">
  <div class="col-3 filter-section">
    <h3>Filter</h3>
    <br>
    <h4>Accessibility Feature</h4>
    <% @accessibility_features.each do |feature| %>
      <div data-controller="filter">
        <button type="button" data-action="click->filter#toggle" data-filter-target="togglableElement"
        id="<%= feature.id %>" class="btn filter-btn w-100" aria-checked="false" autocomplete="off">
          <i class="<%= feature.icon_creater(feature.feature) %>"></i>&nbsp;&nbsp;<%= feature.feature %>
        </button>
      </div>
      <br>
    <% end %>
    <br>
    <h4>Venue Type</h4>
    <% @venue_categories.each do |category| %>
      <div data-controller="filter">
        <button type="button" data-action="click->filter#toggle" data-filter-target="togglableElement"
        id="<%= category.id %>" class="btn filter-btn w-100" aria-checked="false" autocomplete="off">
          <i class="<%= category.icon_creater(category.venue_type) %>"></i>&nbsp;&nbsp;<%= category.venue_type %>
        </button>
      </div>
      <br>
    <% end %>





    <div class="accordion" id="accordionPanelsFilter">
      <div class="accordion-item">
        <h2 class="accordion-header" id="panelsStayOpen-access">
          <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#panelsStayOpen-collapseAccess" aria-expanded="false" aria-controls="panelsStayOpen-collapseAccess">
            Filter by Access Requirement
          </button>
        </h2>
        <div id="panelsStayOpen-collapseAccess" class="accordion-collapse collapse" aria-labelledby="panelsStayOpen-access">
          <div class="accordion-body">
            <form class="filter-form">
                  <h3 class="text-center">Accessibility Requirements</h3>
                  <div class="btn-group-vertical" role="group" aria-label="Accessibility criteria options">
                    <% @accessibility_features.each do |feature| %>
                      <div class="form-check">
                        <input type="checkbox" class="btn-check" id="<%= feature.id %>" name="feature<%= feature.id %>" value="1" />
                        <label class="invert-bubble btn" for="<%= feature.id %>"><i class="<%= feature.icon_creater(feature.feature) %>"></i>  <%= feature.feature %></label>
                      </div>
                    <% end %>
                  </div>
              <input name="commit" type="submit" class="adept-btn filter-form-button" value="Submit Preferences" data-disable-with="Search" />
            </form>
          </div>
        </div>
      </div>

      <div class="accordion-item">
        <h2 class="accordion-header" id="panelsStayOpen-venueType">
          <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#panelsStayOpen-collapseVenueType" aria-expanded="false" aria-controls="panelsStayOpen-collapseVenueType">
            Filter by Venue
          </button>
        </h2>
        <div id="panelsStayOpen-collapseVenueType" class="accordion-collapse collapse" aria-labelledby="panelsStayOpen-venueType">
          <div class="accordion-body">
            <form class="filter-form">
                  <h3 class="text-center">Type of Venue</h3>
                  <div class="btn-group-vertical" role="group" aria-label="Venue type options">
                    <% @venue_categories.each do |category| %>
                      <div class="form-check">
                        <input type="checkbox" class="btn-check" id="<%= category.id %>" name="category<%= category.id %>" value="1" />
                        <label class="invert-bubble btn" for="<%= category.id %>"><i class="<%= category.icon_creater(category.category) %>"></i>  <%= category.venue_type %></label>
                      </div>
                    <% end %>
                  </div>
              <input name="commit" type="submit" class="adept-btn filter-form-button" value="Submit Preferences" data-disable-with="Search" />
            </form>
          </div>
        </div>
      </div>

    </div>
  </div>

  <div class="col-9">
    <a href="/venues/new" class="mapabl-btn-purple add-venue-btn" alt="Add a venue"><i class="fa-sharp fa-regular fa-plus" style="color: #ffffff;"></i><p> </p></a>
    <div class="map"
      data-controller="map"
      data-map-markers-value="<%= @markers.to_json %>"
      data-map-api-key-value="<%= ENV['MAPBOX_API_KEY'] %>">
    </div>
  </div>
</div>
